<br /><br /><br /><br /><br />




<h3> ---- Login to TAKEOFF 

    <ng-container *ngIf="asVendor">
        as Vendor
    </ng-container>
</h3>


<ng-container *ngIf="logginStatus">
    <div nz-row>

        &nbsp;
    </div>

    <div nz-row>
        <div nz-col nzSpan="24" style='text-align: center'>
          
            <ng-template #indicatorTemplate>
                <span style='color:#fd6951'>
                    <i nz-icon style='font-size:30px ; ' nzType="loading"></i>
                    <br /> <b>Please wait....Logging in....</b> </span></ng-template>
            <nz-spin nzSimple [nzIndicator]="indicatorTemplate" [nzSize]="'large'"></nz-spin>

            <!-- <nz-spin nzTip="Please wait....Logging in...." nzSimple [nzSize]="'large'"></nz-spin> -->
        </div>
    </div>

</ng-container>
<ng-container *ngIf="!logginStatus">

    <div nz-row>
        <div nz-col nzSpan="4" style='text-align: left'>&nbsp;</div>
        <div nz-col nzSpan="8" style='text-align: left' *ngIf="asGuest || !asVendor">Mobile</div>
      <div nz-col nzSpan="8" style='text-align: left' *ngIf="!asGuest || asVendor">Mobile / User ID</div>
        <div nz-col nzSpan="12" style='text-align: left'>

            <input type="text" nz-input [(ngModel)]="userid" placeholder="Enter User ID" style='width:60%' />

        </div>

    </div>

    <div nz-row>
        <div nz-col nzSpan="12" style='text-align: left'>&nbsp;</div>
        <div nz-col nzSpan="12" style='text-align: left'> &nbsp;</div>
    </div>

    <div nz-row *ngIf="!asGuest || asVendor">
        <div nz-col nzSpan="4" style='text-align: left'>&nbsp;</div>
        <div nz-col nzSpan="8" style='text-align: left'>Password </div>
        <div nz-col nzSpan="12" style='text-align: left'>


            <nz-input-group [nzSuffix]="suffixTemplate" style='width:60%'>
                <input [type]="passwordVisible ? 'text' : 'password'" nz-input placeholder="Enter Password"
                    [(ngModel)]="password" />
            </nz-input-group>
            <ng-template #suffixTemplate>
                <i nz-icon [nzType]="passwordVisible ? 'eye' : 'eye-invisible'"
                    (click)="passwordVisible = !passwordVisible"></i>
            </ng-template>

            <!-- <input type="password" [(ngModel)]="password" nz-input placeholder="Enter Password" style='width:50%' /> -->

        </div>
    </div>


    <div nz-row>

        <div nz-col nzSpan="24" style='text-align: center' nz-result-extra>
           <button nz-button nzType="text" (click)="router.navigate(['freesubscribe'])"> <u>Sign Up</u> </button>
            <button nz-button nzType="text" *ngIf="!asGuest || asVendor" (click)="passwordModalVisible=true"> <u>Forgot Password?</u> </button>
            <button nz-button nzType="text" *ngIf="!asGuest || asVendor" (click)="asGuest=true; asVendor=false"> <u>As Guest</u> </button>
            <button nz-button nzType="text" *ngIf="!asVendor || asGuest" (click)="asVendor=true; asGuest=false"> <u>Login As Vendor</u> </button>
            <!-- <button nz-button nzType="text" *ngIf="asVendor || asGuest" (click)="asVendor=false; asGuest=false"> <u>As Customer</u> </button>
            -->
        </div>


        <div nz-col nzSpan="24" style='text-align: center' nz-result-extra>
               <button nz-button nzType="primary" (click)=login() style='background: #fd6951;border-color: #fd6951;'>Login to TakeOff</button>
            <!-- <button nz-button (click)='home()'>Back Home</button> -->
        </div>

    </div>
</ng-container>


<nz-modal [nzVisible]="passwordModalVisible" [nzContent]="modalContent" [nzFooter]="null"
    (nzOnCancel)="passwordModalVisible = false">
    <ng-template #modalContent>


        <ng-container *ngIf="!mailSent">
            <h3> Provide Your Details </h3>
            <div nz-row class="container">


                <div nz-col nzSpan="12" style='text-align: left'>Login Id / Mobile </div>
                <div nz-col nzSpan="12" style='text-align: left'>
                    <input type="text" nz-input placeholder="Your Login Id" [(ngModel)]="userId" style='width:100%' />
                </div>
            </div>

            <div nz-row> &nbsp; </div>

            <div nz-row class="container">
                <div nz-col nzSpan="12" style='text-align: left'>Registered Email Id</div>
                <div nz-col nzSpan="12" style='text-align: left'>
                    <input type="text" nz-input placeholder="Registered Email Id" [(ngModel)]="email"
                        style='width:100%' />
                </div>
            </div>

            <div nz-row> &nbsp; </div>

            <div nz-row class="container">
                <div nz-col nzSpan="12" style='text-align: left'>City</div>
                <div nz-col nzSpan="12" style='text-align: left'>


                    <nz-select nzPlaceHolder="Select City" style='width:100%' [(ngModel)]="city">
                        <nz-option nzValue="Tirupati" nzLabel="Tirupati"></nz-option>
                        <nz-option nzValue="Chittoor" nzLabel="Chittoor"></nz-option>
                        <nz-option nzValue="Ananthapur" nzLabel="Ananthapur"></nz-option>
                        <nz-option nzValue="Guntur" nzLabel="Guntur"></nz-option>
                        <nz-option nzValue="Kadapa" nzLabel="Kadapa"></nz-option>
                        <nz-option nzValue="Kakinada" nzLabel="Kakinada"></nz-option>
                        <nz-option nzValue="Kurnool" nzLabel="Kurnool"></nz-option>
                        <nz-option nzValue="Nellore" nzLabel="Nellore"></nz-option>
                        <nz-option nzValue="Guntur" nzLabel="Guntur"></nz-option>
                        <nz-option nzValue="Ongole" nzLabel="Ongole"></nz-option>
                        <nz-option nzValue="Vijayawada" nzLabel="Vijayawada"></nz-option>



                    </nz-select>
                </div>
            </div>



            <div nz-row class="container">
                <div nz-col nzSpan="24" style='text-align: center' nz-result-extra>

                    <button nz-button nzType="primary" (click)='generateMailPasscode()' [nzLoading]='generating'>
                        Generate PassCode
                    </button>
                    <button nz-button [nzLoading]='generating' (click)='passwordModalVisible = false'> Cancel</button>

                </div>
            </div>
        </ng-container>
        <ng-container *ngIf='mailSent'>

            <ng-container *ngIf='!checkedOTP'>
                <h3> OTP Sent to your Mail </h3>

                <div nz-row class="container">


                    <div nz-col nzSpan="12" style='text-align: left'>Provide OTP</div>

                    <div nz-col nzSpan="12" style='text-align: left'>

                        <input type="text" nz-input placeholder="Provide OTP" [(ngModel)]="otp" style='width:100%' />

                    </div>



                </div>

                <div nz-row class="container">
                    <div nz-col nzSpan="24" style='text-align: center' nz-result-extra>

                        <button nz-button nzType="primary" (click)='checkPasswordOTP()' [nzLoading]='checkingOTP'>
                            Submit OTP
                        </button>
                        <button nz-button [nzLoading]='checkingOTP' (click)='passwordModalVisible = false'> Cancel
                        </button>

                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf='checkedOTP'>
                <ng-container *ngIf='!changedpassword'>
                <h3> Change Password </h3>

                <div nz-row class="container">


                    <div nz-col nzSpan="12" style='text-align: left'>New Password</div>

                    <div nz-col nzSpan="12" style='text-align: left'>

                        <nz-input-group [nzSuffix]="suffixTemplate1">
                            <input [type]="passwordVisible1 ? 'text' : 'password'" nz-input placeholder="Change Password"
                                [(ngModel)]="changepassword" style='width:100%' />
                        </nz-input-group>
                        <ng-template #suffixTemplate1>
                            <i nz-icon [nzType]="passwordVisible1 ? 'eye' : 'eye-invisible'"
                                (click)="passwordVisible1 = !passwordVisible1"></i>
                        </ng-template>

                    </div>



                </div>

                <div nz-row> &nbsp; </div>

                <div nz-row class="container">


                    <div nz-col nzSpan="12" style='text-align: left'>Confirm Password</div>

                    <div nz-col nzSpan="12" style='text-align: left'>

                        <nz-input-group [nzSuffix]="suffixTemplate2" >
                            <input [type]="passwordVisible2 ? 'text' : 'password'" nz-input placeholder="Confirm Password"
                                [(ngModel)]="confirmpassword" style='width:100%'  />
                        </nz-input-group>
                        <ng-template #suffixTemplate2>
                            <i nz-icon [nzType]="passwordVisible2 ? 'eye' : 'eye-invisible'"
                                (click)="passwordVisible2 = !passwordVisible2"></i>
                        </ng-template>
                    </div>



                </div>

              

                <div nz-row class="container">
                    <div nz-col nzSpan="24" style='text-align: center' nz-result-extra>

                        <button nz-button nzType="primary" (click)='forgetPassword()' [nzLoading]='changingpassword'>
                            Change Password
                        </button>
                        <button nz-button [nzLoading]='changingpassword' (click)='passwordModalVisible = false'> Cancel
                        </button>

                    </div>
                </div>
                </ng-container>

                <ng-container *ngIf='changedpassword'>
                    <h3> <i nz-icon nzType="check"></i> Password Changed Successfully. </h3>
                    </ng-container>
            </ng-container>

        </ng-container>
    </ng-template>
</nz-modal>
